graph TB

subgraph Main
Mconstructor[Constructor]
onclick
end
 
subgraph Animator
Mconstructor --> Aconstructor[Constructor]
onclick -->Arun[run]
Arun --> Acallback[callback]
AsetState[setState]
end

subgraph TimePeriodTransition
Arun --> TPTconstructor[Constructor]
makeChunkList --> createAnimationStep
TPTconstructor --> makeFilteredList
TPTconstructor --> makeChunkList
TPTconstructor --> chunk["chunks[index]"]
goToNext --> chunk
goToPrev --> chunk
chunk --> runArray
chunk --> cleanUp
cleanUp --> TPTcallback[callback]
end

next.onClick --> goToNext
back.onClick --> goToPrev

subgraph AnimatedObject
Aconstructor --> AOconstructor[Constructor]
runArray --> animateToState
AsetState --> AOsetState[setState]
end

subgraph SpotlightStage
Aconstructor --> SSconstructor[Constructor]
SSconstructor --> createLight
Arun --> dimLights
Arun --> undimLights
chunk --> SSmove[move]
SSmove --> createLight
SSmove --> killLight
end

subgraph Spotlight
createLight --> Sconstructor[Constructor]
Sconstructor --> turnOn
killLight --> turnOff
Smove[move] --> turnOn
SSmove --> Smove
end

subgraph TextController
Aconstructor --> TCconstructor[Constructor]
chunk --> removeText
chunk --> displayText
cleanUp --> enable
goToNext --> disable
goToPrev --> disable
TPTconstructor --> setTimePeriod
end